## longhornctl install preflight

Install Longhorn preflight

### Synopsis

This command prepares your system for Longhorn deployment by installing the necessary dependencies.
These dependencies ensure your Kubernetes cluster meets the requirements for successful Longhorn operation.

On some OS, like for example SLE Micro, after having installed the needed packages, `longhornctl` asks to the user to reboot the machine and
to execute the install command again. During the first execution `longhornctl` install needed packages, during the second one it probes modules, start services and configure tools.

```
longhornctl install preflight [flags]
```

### Examples

```
$ longhornctl install preflight
INFO[2024-07-16T17:06:55+08:00] Initializing preflight installer
INFO[2024-07-16T17:06:55+08:00] Cleaning up preflight installer
INFO[2024-07-16T17:06:55+08:00] Running preflight installer
INFO[2024-07-16T17:06:55+08:00] Installing dependencies with package manager
INFO[2024-07-16T17:09:08+08:00] Installed dependencies with package manager
INFO[2024-07-16T17:09:08+08:00] Retrieved preflight installer result:
ip-192-168-208-117:
  info:
  - Successfully installed package nfs-client
  - Successfully installed package open-iscsi
  - Successfully installed package cryptsetup
  - Successfully probed module nfs
  - Successfully probed module iscsi_tcp
  - Successfully probed module dm_crypt
  - Successfully started service iscsid
INFO[2024-07-16T17:09:08+08:00] Cleaning up preflight installer
INFO[2024-07-16T17:09:08+08:00] Completed preflight installer. Use 'longhornctl check preflight' to check the result (on some os a reboot is required first)
```

If a reboot is required, the following message will be displayed:
```
  warn:
  - Need to reboot the system and execute longhornctl install preflight again
```

### Options

```
      --allow-pci string                Specify a comma-separated (,) list of allowed PCI devices. By default, all PCI devices are blocked by a non-valid address. (default "none")
      --driver-override string          Userspace driver for device bindings. Override default driver for PCI devices.
      --enable-spdk                     Enable installation of SPDK required packages, modules, and setup.
  -h, --help                            help for preflight
      --huge-page-size int              Specify the huge page size in MiB for SPDK. (default 2048)
      --image string                    Image containing longhornctl-local (default "longhornio/longhorn-cli:v1.10.0-dev")
      --image-pull-secret string        Secret with registry credentials for pulling images
      --image-registry string           Registry to apply to all images (CLI, engine, pause, BCI, etc.), replacing any registry already specified in those images.
      --kubeconfig string               Kubernetes config (kubeconfig) path
  -l, --log-level string                Log level (default "info")
      --namespace string                The namespace to run DaemonSet pods. (default "longhorn-system")
      --node-selector string            Comma-separated list of key=value pairs to match against node labels, selecting the nodes the DaemonSet will run on (e.g. env=prod,zone=us-west).
      --operating-system string         Specify the operating system ("", cos). Leave this empty to use the package manager for installation.
      --restart-kubelet                 Enable automatic kubelet service restart to apply changes to huge page size
      --restart-kubelet-window string   Time window for randomized restart (e.g., 10s, 2m). Kubelet will restart at a random time within this window. (default "1m")
      --spdk-options string             Specify a comma-separated (,) list of custom options for configuring SPDK environment.
      --update-packages                 Update packages before installing required dependencies. (default true)
```

### SEE ALSO

* [longhornctl install](longhornctl_install.md)	 - Longhorn installation operations
* [longhornctl install preflight stop](longhornctl_install_preflight_stop.md)	 - Stop Longhorn preflight installer

###### Auto generated by spf13/cobra on 12-Sep-2025
